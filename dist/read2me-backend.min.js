"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Read2MeBackend=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"custom";if(_classCallCheck(this,e),this.apiUrl="https://api-dev.read2me.online/convert/1.0.0/webpage/",void 0===t)throw"First param to Read2MePlayer must be an App Id.";if("number"!=typeof t)throw"Public API key must be a number.";if("string"!=typeof n)throw"Second param to Read2MePlayer (url) must be a string.";if(0===n.length)throw"url must not be empty";if(void 0!==o&&null!==o&&"object"!==(void 0===o?"undefined":_typeof(o)))throw"Third param to Read2MePlayer (cssSelectors) can be omitted, null or array.";if(void 0!==r&&null!==r&&"boolean"!=typeof r)throw"Fourth param to Read2MePlayer (ignoreContentChange) can be omitted, null or a boolean.";if(!s||"string"!=typeof s)throw"Fifth param to Read2MeBackend must be a string";this.appId=t,this.url=n,this.cssSelectors=o,this.ignoreContentChange=r,this.requestSource=s,void 0!==this.cssSelectors&&null!==this.cssSelectors||(this.cssSelectors=[]),void 0!==this.ignoreContentChange&&null!==this.ignoreContentChange||(this.ignoreContentChange=!1)}return _createClass(e,[{key:"_getIgnoreContentChangeAsString",value:function(){return this.ignoreContentChange?"true":"false"}},{key:"getRequestUri",value:function(){return this.apiUrl+"?url="+encodeURIComponent(this.url)+"&css_selectors="+encodeURIComponent(this.cssSelectors.join("|"))+"&ignore_content_change="+this._getIgnoreContentChangeAsString()+"&request_source"+this.requestSource}},{key:"get",value:function(e,t,n){var o=new XMLHttpRequest;o.open("GET",this.getRequestUri(),!0),o.setRequestHeader("X-App-Id",this.appId),o.onload=function(){var r=JSON.parse(o.responseText);o.status>=200&&o.status<400?e(r):404===o.status?t(r):n(r)},o.onerror=function(){console.warn("Connection to Read2Me backend API failed.")},o.send()}},{key:"create",value:function(e,t){var n=new XMLHttpRequest;n.open("POST",this.getRequestUri(),!0),n.setRequestHeader("X-App-Id",this.appId),n.onload=function(){var o=JSON.parse(n.responseText);n.status>=200&&n.status<400?e(o):t(o)},n.onerror=function(){console.warn("Connection to Read2Me API failed.")},n.send()}}]),e}();